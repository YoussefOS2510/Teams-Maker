{"ast":null,"code":"import React,{useState,useEffect}from'react';// Helper to extract sheet ID from URL or return as-is if already an ID\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function extractSheetId(urlOrId){if(!urlOrId)return'';const match=urlOrId.match(/\\/d\\/([a-zA-Z0-9-_]+)/);return match?match[1]:urlOrId;}const API_KEY='AIzaSyDikFRwZNuVTMS4k4Mc9R3KxWqF0sXG0ms';// <-- PUT YOUR API KEY HERE\nconst RANGE='Main!A1:H';// Main sheet, columns A-H\nconst olympicColors=['#0081C8',// Blue\n'#FFD100',// Yellow\n'#000',// Black\n'#009F3D',// Green\n'#EF3340'// Red\n];const GoogleSheetsData=_ref=>{let{sheetUrl}=_ref;const[teams,setTeams]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[lastUpdated,setLastUpdated]=useState(null);const[initialLoad,setInitialLoad]=useState(true);useEffect(()=>{fetchTeams(true);const interval=setInterval(()=>fetchTeams(false),20000);// 20 seconds\nreturn()=>clearInterval(interval);// eslint-disable-next-line\n},[sheetUrl]);const fetchTeams=async function(){let isInitial=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(isInitial)setLoading(true);setError(null);try{const SHEET_ID=extractSheetId(sheetUrl);if(!SHEET_ID)throw new Error('Invalid Google Sheet URL or ID.');const url=`https://sheets.googleapis.com/v4/spreadsheets/1Ji3h_aUL0X9w2jIUWqCQOlVyTEd9rQR4-sdtEww7prY/values/${RANGE}?key=${API_KEY}`;const response=await fetch(url);if(!response.ok)throw new Error(`HTTP error! status: ${response.status}`);const data=await response.json();if(!data.values||data.values.length===0){setTeams([]);setLastUpdated(new Date());if(isInitial)setLoading(false);setInitialLoad(false);return;}// Pad all rows to 8 columns\nconst allRows=data.values.map(row=>{const padded=[...row];while(padded.length<8)padded.push('');return padded.slice(0,8);});// allRows[0] = headers, allRows[1..] = data\nconst teamList=allRows[0].map((header,colIdx)=>({name:header,members:allRows.slice(1).map(row=>row[colIdx]).filter(cell=>cell&&cell.trim()!=='')}));setTeams(teamList);setLastUpdated(new Date());}catch(err){setError(`Failed to load data: ${err.message}`);}finally{if(isInitial)setLoading(false);setInitialLoad(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"gsheet-card gsheet-card-compact\",children:loading&&initialLoad?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading teams from Google Sheets...\"})}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchTeams(false),className:\"refresh-btn\",children:\"Refresh Now\"})]}):teams.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-data\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No teams found in the Google Sheet.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Make sure your sheet is published to the web and contains data.\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gsheet-header gsheet-header-compact\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"gsheet-title\",children:\"Teams & Members\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"gsheet-controls\",children:[lastUpdated&&/*#__PURE__*/_jsxs(\"span\",{className:\"gsheet-update-time\",children:[\"Last updated: \",lastUpdated.toLocaleTimeString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchTeams(false),className:\"refresh-btn\",children:\"Refresh\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"gsheet-teams-grid gsheet-teams-grid-compact\",children:teams.map((team,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"gsheet-team-card gsheet-team-card-compact\",style:{borderLeft:`5px solid ${olympicColors[idx%olympicColors.length]}`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"gsheet-team-header gsheet-team-header-compact\",children:team.name||`Team ${idx+1}`}),/*#__PURE__*/_jsx(\"ul\",{className:\"gsheet-team-members gsheet-team-members-compact\",children:team.members.length===0?/*#__PURE__*/_jsx(\"li\",{className:\"gsheet-no-members\",children:\"No members\"}):team.members.map((member,mIdx)=>/*#__PURE__*/_jsx(\"li\",{children:member},mIdx))})]},idx))})]})});};export default GoogleSheetsData;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","extractSheetId","urlOrId","match","API_KEY","RANGE","olympicColors","GoogleSheetsData","_ref","sheetUrl","teams","setTeams","loading","setLoading","error","setError","lastUpdated","setLastUpdated","initialLoad","setInitialLoad","fetchTeams","interval","setInterval","clearInterval","isInitial","arguments","length","undefined","SHEET_ID","Error","url","response","fetch","ok","status","data","json","values","Date","allRows","map","row","padded","push","slice","teamList","header","colIdx","name","members","filter","cell","trim","err","message","className","children","onClick","toLocaleTimeString","team","idx","style","borderLeft","member","mIdx"],"sources":["C:/Users/Youssef/Desktop/Teams Summer 2025/olympic-frontend/src/components/GoogleSheetsData.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\n// Helper to extract sheet ID from URL or return as-is if already an ID\r\nfunction extractSheetId(urlOrId) {\r\n  if (!urlOrId) return '';\r\n  const match = urlOrId.match(/\\/d\\/([a-zA-Z0-9-_]+)/);\r\n  return match ? match[1] : urlOrId;\r\n}\r\n\r\nconst API_KEY = 'AIzaSyDikFRwZNuVTMS4k4Mc9R3KxWqF0sXG0ms'; // <-- PUT YOUR API KEY HERE\r\nconst RANGE = 'Main!A1:H'; // Main sheet, columns A-H\r\n\r\nconst olympicColors = [\r\n  '#0081C8', // Blue\r\n  '#FFD100', // Yellow\r\n  '#000',    // Black\r\n  '#009F3D', // Green\r\n  '#EF3340'  // Red\r\n];\r\n\r\nconst GoogleSheetsData = ({ sheetUrl }) => {\r\n  const [teams, setTeams] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [lastUpdated, setLastUpdated] = useState(null);\r\n  const [initialLoad, setInitialLoad] = useState(true);\r\n\r\n  useEffect(() => {\r\n    \r\n    fetchTeams(true);\r\n    const interval = setInterval(() => fetchTeams(false), 20000); // 20 seconds\r\n    return () => clearInterval(interval);\r\n    // eslint-disable-next-line\r\n  }, [sheetUrl]);\r\n\r\n  const fetchTeams = async (isInitial = false) => {\r\n    if (isInitial) setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const SHEET_ID = extractSheetId(sheetUrl);\r\n      if (!SHEET_ID) throw new Error('Invalid Google Sheet URL or ID.');\r\n      const url = `https://sheets.googleapis.com/v4/spreadsheets/1Ji3h_aUL0X9w2jIUWqCQOlVyTEd9rQR4-sdtEww7prY/values/${RANGE}?key=${API_KEY}`;\r\n      const response = await fetch(url);\r\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\r\n      const data = await response.json();\r\n      if (!data.values || data.values.length === 0) {\r\n        setTeams([]);\r\n        setLastUpdated(new Date());\r\n        if (isInitial) setLoading(false);\r\n        setInitialLoad(false);\r\n        return;\r\n      }\r\n      // Pad all rows to 8 columns\r\n      const allRows = data.values.map(row => {\r\n        const padded = [...row];\r\n        while (padded.length < 8) padded.push('');\r\n        return padded.slice(0, 8);\r\n      });\r\n      // allRows[0] = headers, allRows[1..] = data\r\n      const teamList = allRows[0].map((header, colIdx) => ({\r\n        name: header,\r\n        members: allRows.slice(1).map(row => row[colIdx]).filter(cell => cell && cell.trim() !== '')\r\n      }));\r\n      setTeams(teamList);\r\n      setLastUpdated(new Date());\r\n    } catch (err) {\r\n      setError(`Failed to load data: ${err.message}`);\r\n    } finally {\r\n      if (isInitial) setLoading(false);\r\n      setInitialLoad(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"gsheet-card gsheet-card-compact\">\r\n      {loading && initialLoad ? (\r\n        <div className=\"loading\">\r\n          <p>Loading teams from Google Sheets...</p>\r\n        </div>\r\n      ) : error ? (\r\n        <div className=\"error\">\r\n          <p>Error: {error}</p>\r\n          <button onClick={() => fetchTeams(false)} className=\"refresh-btn\">\r\n            Refresh Now\r\n          </button>\r\n        </div>\r\n      ) : teams.length === 0 ? (\r\n        <div className=\"no-data\">\r\n          <p>No teams found in the Google Sheet.</p>\r\n          <p>Make sure your sheet is published to the web and contains data.</p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className=\"gsheet-header gsheet-header-compact\">\r\n            <span className=\"gsheet-title\">Teams & Members</span>\r\n            <div className=\"gsheet-controls\">\r\n              {lastUpdated && (\r\n                <span className=\"gsheet-update-time\">\r\n                  Last updated: {lastUpdated.toLocaleTimeString()}\r\n                </span>\r\n              )}\r\n              <button onClick={() => fetchTeams(false)} className=\"refresh-btn\">\r\n                Refresh\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"gsheet-teams-grid gsheet-teams-grid-compact\">\r\n            {teams.map((team, idx) => (\r\n              <div\r\n                className=\"gsheet-team-card gsheet-team-card-compact\"\r\n                key={idx}\r\n                style={{ borderLeft: `5px solid ${olympicColors[idx % olympicColors.length]}` }}\r\n              >\r\n                <div className=\"gsheet-team-header gsheet-team-header-compact\">\r\n                  {team.name || `Team ${idx + 1}`}\r\n                </div>\r\n                <ul className=\"gsheet-team-members gsheet-team-members-compact\">\r\n                  {team.members.length === 0 ? (\r\n                    <li className=\"gsheet-no-members\">No members</li>\r\n                  ) : (\r\n                    team.members.map((member, mIdx) => (\r\n                      <li key={mIdx}>{member}</li>\r\n                    ))\r\n                  )}\r\n                </ul>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GoogleSheetsData; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}